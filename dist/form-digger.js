/*! @dotburo/form-digger 1.1.0 | dotburo <code@dotburo.org> (https://dotburo.org) !*/
var t="object"==typeof global&&global&&global.Object===Object&&global,e="object"==typeof self&&self&&self.Object===Object&&self,r=t||e||Function("return this")(),n=r.Symbol,o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=n?n.toStringTag:void 0;var c=Object.prototype.toString;var f=n?n.toStringTag:void 0;function s(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":f&&f in Object(t)?function(t){var e=i.call(t,u),r=t[u];try{t[u]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[u]=r:delete t[u]),o}(t):function(t){return c.call(t)}(t)}function l(t){return null!=t&&"object"==typeof t}function p(t){return"symbol"==typeof t||l(t)&&"[object Symbol]"==s(t)}function v(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var h=Array.isArray,y=n?n.prototype:void 0,d=y?y.toString:void 0;function b(t){if("string"==typeof t)return t;if(h(t))return v(t,b)+"";if(p(t))return d?d.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}var _=/\s/;var g=/^\s+/;function j(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&_.test(t.charAt(e)););return e}(t)+1).replace(g,""):t}function m(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var w=/^[-+]0x[0-9a-f]+$/i,O=/^0b[01]+$/i,A=/^0o[0-7]+$/i,E=parseInt;function S(t){if("number"==typeof t)return t;if(p(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=j(t);var r=O.test(t);return r||A.test(t)?E(t.slice(2),r?2:8):w.test(t)?NaN:+t}function x(t){return t}function P(t){if(!m(t))return!1;var e=s(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var z,T=r["__core-js_shared__"],L=(z=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var $=Function.prototype.toString;function I(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var k=/^\[object .+?Constructor\]$/,D=Function.prototype,M=Object.prototype,U=D.toString,F=M.hasOwnProperty,H=RegExp("^"+U.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function N(t){return!(!m(t)||(e=t,L&&L in e))&&(P(t)?H:k).test(I(t));var e}function B(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return N(r)?r:void 0}var C=B(r,"WeakMap"),q=Object.create,R=function(){function t(){}return function(e){if(!m(e))return{};if(q)return q(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function W(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var V=Date.now;var Q,G,K,J=function(){try{var t=B(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),X=J,Y=X?function(t,e){return X(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:x,Z=(Q=Y,G=0,K=0,function(){var t=V(),e=16-(t-K);if(K=t,e>0){if(++G>=800)return arguments[0]}else G=0;return Q.apply(void 0,arguments)}),tt=/^(?:0|[1-9]\d*)$/;function et(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&tt.test(t))&&t>-1&&t%1==0&&t<e}function rt(t,e,r){"__proto__"==e&&X?X(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function nt(t,e){return t===e||t!=t&&e!=e}var ot=Object.prototype.hasOwnProperty;function it(t,e,r){var n=t[e];ot.call(t,e)&&nt(n,r)&&(void 0!==r||e in t)||rt(t,e,r)}var at=Math.max;function ut(t,e){return Z(function(t,e,r){return e=at(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=at(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=n[o];return u[e]=r(a),W(t,this,u)}}(t,e,x),t+"")}function ct(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function ft(t){return null!=t&&ct(t.length)&&!P(t)}var st=Object.prototype;function lt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||st)}function pt(t){return l(t)&&"[object Arguments]"==s(t)}var vt=Object.prototype,ht=vt.hasOwnProperty,yt=vt.propertyIsEnumerable,dt=pt(function(){return arguments}())?pt:function(t){return l(t)&&ht.call(t,"callee")&&!yt.call(t,"callee")};var bt="object"==typeof exports&&exports&&!exports.nodeType&&exports,_t=bt&&"object"==typeof module&&module&&!module.nodeType&&module,gt=_t&&_t.exports===bt?r.Buffer:void 0,jt=(gt?gt.isBuffer:void 0)||function(){return!1},mt={};mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt["[object Arguments]"]=mt["[object Array]"]=mt["[object ArrayBuffer]"]=mt["[object Boolean]"]=mt["[object DataView]"]=mt["[object Date]"]=mt["[object Error]"]=mt["[object Function]"]=mt["[object Map]"]=mt["[object Number]"]=mt["[object Object]"]=mt["[object RegExp]"]=mt["[object Set]"]=mt["[object String]"]=mt["[object WeakMap]"]=!1;var wt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ot=wt&&"object"==typeof module&&module&&!module.nodeType&&module,At=Ot&&Ot.exports===wt&&t.process,Et=function(){try{var t=Ot&&Ot.require&&Ot.require("util").types;return t||At&&At.binding&&At.binding("util")}catch(t){}}(),St=Et&&Et.isTypedArray,xt=St?function(t){return function(e){return t(e)}}(St):function(t){return l(t)&&ct(t.length)&&!!mt[s(t)]},Pt=xt,zt=Object.prototype.hasOwnProperty;function Tt(t,e){var r=h(t),n=!r&&dt(t),o=!r&&!n&&jt(t),i=!r&&!n&&!o&&Pt(t),a=r||n||o||i,u=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],c=u.length;for(var f in t)!e&&!zt.call(t,f)||a&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||et(f,c))||u.push(f);return u}function Lt(t,e){return function(r){return t(e(r))}}var $t=Lt(Object.keys,Object),It=Object.prototype.hasOwnProperty;function kt(t){return ft(t)?Tt(t):function(t){if(!lt(t))return $t(t);var e=[];for(var r in Object(t))It.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}var Dt=Object.prototype.hasOwnProperty;function Mt(t){if(!m(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=lt(t),r=[];for(var n in t)("constructor"!=n||!e&&Dt.call(t,n))&&r.push(n);return r}function Ut(t){return ft(t)?Tt(t,!0):Mt(t)}var Ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ht=/^\w*$/;function Nt(t,e){if(h(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!p(t))||(Ht.test(t)||!Ft.test(t)||null!=e&&t in Object(e))}var Bt=B(Object,"create");var Ct=Object.prototype.hasOwnProperty;var qt=Object.prototype.hasOwnProperty;function Rt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Wt(t,e){for(var r=t.length;r--;)if(nt(t[r][0],e))return r;return-1}Rt.prototype.clear=function(){this.__data__=Bt?Bt(null):{},this.size=0},Rt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Rt.prototype.get=function(t){var e=this.__data__;if(Bt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Ct.call(e,t)?e[t]:void 0},Rt.prototype.has=function(t){var e=this.__data__;return Bt?void 0!==e[t]:qt.call(e,t)},Rt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Bt&&void 0===e?"__lodash_hash_undefined__":e,this};var Vt=Array.prototype.splice;function Qt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Qt.prototype.clear=function(){this.__data__=[],this.size=0},Qt.prototype.delete=function(t){var e=this.__data__,r=Wt(e,t);return!(r<0)&&(r==e.length-1?e.pop():Vt.call(e,r,1),--this.size,!0)},Qt.prototype.get=function(t){var e=this.__data__,r=Wt(e,t);return r<0?void 0:e[r][1]},Qt.prototype.has=function(t){return Wt(this.__data__,t)>-1},Qt.prototype.set=function(t,e){var r=this.__data__,n=Wt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};var Gt=B(r,"Map");function Kt(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function Jt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Jt.prototype.clear=function(){this.size=0,this.__data__={hash:new Rt,map:new(Gt||Qt),string:new Rt}},Jt.prototype.delete=function(t){var e=Kt(this,t).delete(t);return this.size-=e?1:0,e},Jt.prototype.get=function(t){return Kt(this,t).get(t)},Jt.prototype.has=function(t){return Kt(this,t).has(t)},Jt.prototype.set=function(t,e){var r=Kt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Xt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Xt.Cache||Jt),r}Xt.Cache=Jt;var Yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zt=/\\(\\)?/g,te=function(t){var e=Xt(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Yt,(function(t,r,n,o){e.push(n?o.replace(Zt,"$1"):r||t)})),e})),ee=te;function re(t,e){return h(t)?t:Nt(t,e)?[t]:ee(function(t){return null==t?"":b(t)}(t))}function ne(t){if("string"==typeof t||p(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function oe(t,e){for(var r=0,n=(e=re(e,t)).length;null!=t&&r<n;)t=t[ne(e[r++])];return r&&r==n?t:void 0}function ie(t,e,r){var n=null==t?void 0:oe(t,e);return void 0===n?r:n}function ae(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var ue=Lt(Object.getPrototypeOf,Object),ce=Function.prototype,fe=Object.prototype,se=ce.toString,le=fe.hasOwnProperty,pe=se.call(Object);function ve(t){var e=this.__data__=new Qt(t);this.size=e.size}ve.prototype.clear=function(){this.__data__=new Qt,this.size=0},ve.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},ve.prototype.get=function(t){return this.__data__.get(t)},ve.prototype.has=function(t){return this.__data__.has(t)},ve.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Qt){var n=r.__data__;if(!Gt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Jt(n)}return r.set(t,e),this.size=r.size,this};var he="object"==typeof exports&&exports&&!exports.nodeType&&exports,ye=he&&"object"==typeof module&&module&&!module.nodeType&&module,de=ye&&ye.exports===he?r.Buffer:void 0,be=de?de.allocUnsafe:void 0;function _e(){return[]}var ge=Object.prototype.propertyIsEnumerable,je=Object.getOwnPropertySymbols,me=je?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}(je(t),(function(e){return ge.call(t,e)})))}:_e,we=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ae(e,me(t)),t=ue(t);return e}:_e;function Oe(t,e,r){var n=e(t);return h(t)?n:ae(n,r(t))}function Ae(t){return Oe(t,kt,me)}var Ee=B(r,"DataView"),Se=B(r,"Promise"),xe=B(r,"Set"),Pe=I(Ee),ze=I(Gt),Te=I(Se),Le=I(xe),$e=I(C),Ie=s;(Ee&&"[object DataView]"!=Ie(new Ee(new ArrayBuffer(1)))||Gt&&"[object Map]"!=Ie(new Gt)||Se&&"[object Promise]"!=Ie(Se.resolve())||xe&&"[object Set]"!=Ie(new xe)||C&&"[object WeakMap]"!=Ie(new C))&&(Ie=function(t){var e=s(t),r="[object Object]"==e?t.constructor:void 0,n=r?I(r):"";if(n)switch(n){case Pe:return"[object DataView]";case ze:return"[object Map]";case Te:return"[object Promise]";case Le:return"[object Set]";case $e:return"[object WeakMap]"}return e});var ke=Ie,De=r.Uint8Array;function Me(t,e){var r,n,o=e?(r=t.buffer,n=new r.constructor(r.byteLength),new De(n).set(new De(r)),n):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}function Ue(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Jt;++e<r;)this.add(t[e])}function Fe(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}Ue.prototype.add=Ue.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ue.prototype.has=function(t){return this.__data__.has(t)};function He(t,e,r,n,o,i){var a=1&r,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var f=i.get(t),s=i.get(e);if(f&&s)return f==e&&s==t;var l=-1,p=!0,v=2&r?new Ue:void 0;for(i.set(t,e),i.set(e,t);++l<u;){var h=t[l],y=e[l];if(n)var d=a?n(y,h,l,e,t,i):n(h,y,l,t,e,i);if(void 0!==d){if(d)continue;p=!1;break}if(v){if(!Fe(e,(function(t,e){if(a=e,!v.has(a)&&(h===t||o(h,t,r,n,i)))return v.push(e);var a}))){p=!1;break}}else if(h!==y&&!o(h,y,r,n,i)){p=!1;break}}return i.delete(t),i.delete(e),p}function Ne(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function Be(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var Ce=n?n.prototype:void 0,qe=Ce?Ce.valueOf:void 0;var Re=Object.prototype.hasOwnProperty;var We="[object Object]",Ve=Object.prototype.hasOwnProperty;function Qe(t,e,r,n,o,i){var a=h(t),u=h(e),c=a?"[object Array]":ke(t),f=u?"[object Array]":ke(e),s=(c="[object Arguments]"==c?We:c)==We,l=(f="[object Arguments]"==f?We:f)==We,p=c==f;if(p&&jt(t)){if(!jt(e))return!1;a=!0,s=!1}if(p&&!s)return i||(i=new ve),a||Pt(t)?He(t,e,r,n,o,i):function(t,e,r,n,o,i,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new De(t),new De(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return nt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=Ne;case"[object Set]":var c=1&n;if(u||(u=Be),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;n|=2,a.set(t,e);var s=He(u(t),u(e),n,o,i,a);return a.delete(t),s;case"[object Symbol]":if(qe)return qe.call(t)==qe.call(e)}return!1}(t,e,c,r,n,o,i);if(!(1&r)){var v=s&&Ve.call(t,"__wrapped__"),y=l&&Ve.call(e,"__wrapped__");if(v||y){var d=v?t.value():t,b=y?e.value():e;return i||(i=new ve),o(d,b,r,n,i)}}return!!p&&(i||(i=new ve),function(t,e,r,n,o,i){var a=1&r,u=Ae(t),c=u.length;if(c!=Ae(e).length&&!a)return!1;for(var f=c;f--;){var s=u[f];if(!(a?s in e:Re.call(e,s)))return!1}var l=i.get(t),p=i.get(e);if(l&&p)return l==e&&p==t;var v=!0;i.set(t,e),i.set(e,t);for(var h=a;++f<c;){var y=t[s=u[f]],d=e[s];if(n)var b=a?n(d,y,s,e,t,i):n(y,d,s,t,e,i);if(!(void 0===b?y===d||o(y,d,r,n,i):b)){v=!1;break}h||(h="constructor"==s)}if(v&&!h){var _=t.constructor,g=e.constructor;_==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof g&&g instanceof g||(v=!1)}return i.delete(t),i.delete(e),v}(t,e,r,n,o,i))}function Ge(t,e,r,n,o){return t===e||(null==t||null==e||!l(t)&&!l(e)?t!=t&&e!=e:Qe(t,e,r,n,Ge,o))}function Ke(t){return t==t&&!m(t)}function Je(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function Xe(t){var e=function(t){for(var e=kt(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Ke(o)]}return e}(t);return 1==e.length&&e[0][2]?Je(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var u=r[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var c=(u=r[o])[0],f=t[c],s=u[1];if(a&&u[2]){if(void 0===f&&!(c in t))return!1}else{var l=new ve;if(n)var p=n(f,s,c,t,e,l);if(!(void 0===p?Ge(s,f,3,n,l):p))return!1}}return!0}(r,t,e)}}function Ye(t,e){return null!=t&&e in Object(t)}function Ze(t,e,r){for(var n=-1,o=(e=re(e,t)).length,i=!1;++n<o;){var a=ne(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&ct(o)&&et(a,o)&&(h(t)||dt(t))}function tr(t,e){return Nt(t)&&Ke(e)?Je(ne(t),e):function(r){var n=ie(r,t);return void 0===n&&n===e?function(t,e){return null!=t&&Ze(t,e,Ye)}(r,t):Ge(e,n,3)}}function er(t){return Nt(t)?(e=ne(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return oe(e,t)}}(t);var e}var rr,nr=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),a=i.length;a--;){var u=i[rr?a:++n];if(!1===e(o[u],u,o))break}return t},or=function(){return r.Date.now()},ir=Math.max,ar=Math.min;function ur(t,e,r){var n,o,i,a,u,c,f=0,s=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var r=n,i=o;return n=o=void 0,f=e,a=t.apply(i,r)}function h(t){return f=t,u=setTimeout(d,e),s?v(t):a}function y(t){var r=t-c;return void 0===c||r>=e||r<0||l&&t-f>=i}function d(){var t=or();if(y(t))return b(t);u=setTimeout(d,function(t){var r=e-(t-c);return l?ar(r,i-(t-f)):r}(t))}function b(t){return u=void 0,p&&n?v(t):(n=o=void 0,a)}function _(){var t=or(),r=y(t);if(n=arguments,o=this,c=t,r){if(void 0===u)return h(c);if(l)return clearTimeout(u),u=setTimeout(d,e),v(c)}return void 0===u&&(u=setTimeout(d,e)),a}return e=S(e)||0,m(r)&&(s=!!r.leading,i=(l="maxWait"in r)?ir(S(r.maxWait)||0,e):i,p="trailing"in r?!!r.trailing:p),_.cancel=function(){void 0!==u&&clearTimeout(u),f=0,n=c=o=u=void 0},_.flush=function(){return void 0===u?a:b(or())},_}function cr(t,e,r){(void 0!==r&&!nt(t[e],r)||void 0===r&&!(e in t))&&rt(t,e,r)}function fr(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function sr(t){return function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var u=e[i],c=n?n(r[u],t[u],u,r,t):void 0;void 0===c&&(c=t[u]),o?rt(r,u,c):it(r,u,c)}return r}(t,Ut(t))}function lr(t,e,r,n,o,i,a){var u=fr(t,r),c=fr(e,r),f=a.get(c);if(f)cr(t,r,f);else{var p,v=i?i(u,c,r+"",t,e,a):void 0,y=void 0===v;if(y){var d=h(c),b=!d&&jt(c),_=!d&&!b&&Pt(c);v=c,d||b||_?h(u)?v=u:l(p=u)&&ft(p)?v=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(u):b?(y=!1,v=function(t,e){if(e)return t.slice();var r=t.length,n=be?be(r):new t.constructor(r);return t.copy(n),n}(c,!0)):_?(y=!1,v=Me(c,!0)):v=[]:function(t){if(!l(t)||"[object Object]"!=s(t))return!1;var e=ue(t);if(null===e)return!0;var r=le.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&se.call(r)==pe}(c)||dt(c)?(v=u,dt(u)?v=sr(u):m(u)&&!P(u)||(v=function(t){return"function"!=typeof t.constructor||lt(t)?{}:R(ue(t))}(c))):y=!1}y&&(a.set(c,v),o(v,c,n,i,a),a.delete(c)),cr(t,r,v)}}function pr(t,e,r,n,o){t!==e&&nr(e,(function(i,a){if(o||(o=new ve),m(i))lr(t,e,a,r,pr,n,o);else{var u=n?n(fr(t,a),i,a+"",t,e,o):void 0;void 0===u&&(u=i),cr(t,a,u)}}),Ut)}var vr=Object.prototype.hasOwnProperty;function hr(t,e){return null!=t&&vr.call(t,e)}function yr(t,e){return null!=t&&Ze(t,e,hr)}var dr,br=(dr=function(t,e,r){pr(t,e,r)},ut((function(t,e){var r=-1,n=e.length,o=n>1?e[n-1]:void 0,i=n>2?e[2]:void 0;for(o=dr.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(t,e,r){if(!m(r))return!1;var n=typeof e;return!!("number"==n?ft(r)&&et(e,r.length):"string"==n&&e in r)&&nt(r[e],t)}(e[0],e[1],i)&&(o=n<3?void 0:o,n=1),t=Object(t);++r<n;){var a=e[r];a&&dr(t,a,r,o)}return t})));function _r(t,e,r,n){if(!m(t))return t;for(var o=-1,i=(e=re(e,t)).length,a=i-1,u=t;null!=u&&++o<i;){var c=ne(e[o]),f=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var s=u[c];void 0===(f=n?n(s,c,u):void 0)&&(f=m(s)?s:et(e[o+1])?[]:{})}it(u,c,f),u=u[c]}return t}function gr(t,e){if(null==t)return{};var r,n=v(function(t){return Oe(t,Ut,we)}(t),(function(t){return[t]}));return e="function"==typeof(r=e)?r:null==r?x:"object"==typeof r?h(r)?tr(r[0],r[1]):Xe(r):er(r),function(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var a=e[n],u=oe(t,a);r(u,a)&&_r(i,re(a,t),u)}return i}(t,n,(function(t,r){return e(t,r[0])}))}const jr={baseUri:"",form:null,results:null,responseItemsKey:"data",paginator:null,renderEmptyList:()=>"<div>No items found for these criteria</div>",renderItemList:t=>`<ul>${t}</ul>`,renderItem:t=>`<li>${JSON.stringify(t)}</li>`};function mr(t){const e=br({},jr,t);this._lastQuery="",function(t,e){e.forEach((e=>{if(!yr(t,e))throw new Error(`The ${e} property is missing`)}))}(e,["form","results","baseUri"]);let r=function(t){let e={};[...t.form.elements].map((t=>t.name)).filter((t=>t)).forEach((t=>{e[t]=null})),t.paginator&&(e.page=t.paginator.current());return e}(e);r=wr.call(this,e,r),Or.call(this,e,r)}function wr(t,e){const r=window.location.search.replace("?",""),n=function(t){return[...new URLSearchParams(t).entries()].reduce(((t,[e,r])=>(t[e]=r,t)),{})}(r);return Object.keys(n).forEach((t=>{yr(e,t)&&(e[t]=n[t])})),this._handleHistory({query:r,parameters:n},t,!0),e}function Or(t,e){t.form.addEventListener("change",(r=>this._handleEvents(r,t,e)),!1),t.form.addEventListener("input",(r=>this._handleEvents(r,t,e)),!1),t.form.addEventListener("onDiggerPushState",(e=>this._handleHistory(e.detail,t)),!1),window.addEventListener("popstate",(e=>this._handleHistory(e.state,t,!0)),!1),t.paginator&&t.paginator.onChange((r=>{Er(t,!0),this._setHistory(Ar(e,"page",r),t)}))}function Ar(t,e,r=null){return(t[e]||null===t[e])&&(t[e]=r||null),yr(t,"page")&&"page"!==e&&(t.page=1),gr(t)}function Er(t,e){const r=new CustomEvent("onDiggerLoading",{detail:{state:e}});t.form.dispatchEvent(r)}mr.prototype._handleEvents=function(t,e,r){const n=t.target,o=!n.dataset.minLength||n.value.length>=+n.dataset.minLength,i=n.dataset.debounce&&"0"!==n.dataset.debounce,a=()=>this._setHistory(Ar(r,t.target.name,t.target.value),e);o&&(Er(e,!0),i?ur(a,+n.dataset.debounce)():a())},mr.prototype._handleHistory=function(t,e,r=!1){r&&function(t,e){[...e.form.elements].forEach((e=>{e.name&&yr(t,e.name)&&(e.value=t[e.name])}))}(t.parameters,e),this._fetchData(t.query,e).then((r=>function(t,e,r){const n=ie(t,e.responseItemsKey);e.paginator&&e.paginator.render(t);if(Er(e,!1),!n.length)return void(e.results.innerHTML=e.renderEmptyList(r));let o="";n.forEach((t=>o+=e.renderItem(t))),e.results.innerHTML=e.renderItemList(o)}(r,e,t.parameters)))},mr.prototype._setHistory=function(t,e){const r=new URLSearchParams(t).toString();if(r===this._lastQuery||!r)return;this._lastQuery=r;const n=window.location.pathname+"?"+r,o=new CustomEvent("onDiggerPushState",{detail:{query:r,parameters:t}});e.form.dispatchEvent(o),window.history.pushState({query:r,parameters:t},document.title,n)},mr.prototype._fetchData=function(t,e){return window.fetch(e.baseUri+"?"+t,{method:"GET",headers:{Accept:"application/json"}}).then((t=>t.json()))};export{mr as default};
//# sourceMappingURL=form-digger.js.map
